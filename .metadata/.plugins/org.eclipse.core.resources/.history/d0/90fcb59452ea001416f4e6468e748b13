import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;


public class SmtpClient {

	public static void main(String[] args) {
		Socket smtpSocket=null;
		DataOutputStream os=null;
		DataInputStream is=null;
		try
		{
			smtpSocket =new Socket("hostname", 25);
			os=new DataOutputStream(smtpSocket.getOutputStream());
			is=new DataInputStream(smtpSocket.getInputStream());
		}catch(UnknownHostException e)
		{
			System.err.println("Don't know about host:");
		}catch(IOException e)
		{
			System.err.println("Couldnt get I/O for the connection");
		}
		if(smtpSocket!=null&&os!=null&&is!=null)
		{
			try
			{
				os.writeBytes("HELO/n");
				os.writeBytes("Mail From");
				os.writeBytes("RCTP To");
				os.writeBytes("Data/n");
				os.writeBytes("From");
				os.writeBytes("Hi There");
				os.writeBytes("QUIT");
				String responseLine;
				while((responseLine=is.readLine())!=null)
				{
					System.out.println("server:"+responseLine);
					if (responseLine.indexOf("Ok") != -1) {
	                      break;
	                    }
				}
				os.close();
				is.close();
				smtpSocket.close();
				
			}catch (UnknownHostException e) {
				System.err.println("Try to connect"+e);

				// TODO: handle exception
			}catch(IOException e)
			{
				System.err.println("IOException");

			}
		}

	}

}
